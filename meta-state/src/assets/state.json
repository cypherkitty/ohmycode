[
  {
    "workflowName": "Vault Creation",
    "description": "A device creates a vault and the server creates a new vault",
    "states": [
      {
        "description": "Client creates a vault",
        "nodes": [
          {
            "name": "DEVICE_A",
            "objects": [
              {
                "name": "DeviceA/VaultAudit",
                "records": [
                  {
                    "key": "DeviceA/VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              }
            ]
          },
          {
            "name": "SERVER",
            "objects": []
          }
        ]
      },

      {
        "description": "Server: gets a vault creation request",
        "nodes": [
          {
            "name": "DEVICE_A",
            "objects": [
              {
                "name": "DeviceA/VaultAudit",
                "records": [
                  {
                    "key": "DeviceA/VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              }
            ]
          },
          {
            "name": "SERVER",
            "objects": [
              {
                "name": "DeviceA/VaultAudit",
                "records": [
                  {
                    "key": "DeviceA/VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              }
            ]
          }
        ]
      },

      {
        "description": "Server creates a new vault",
        "nodes": [
          {
            "name": "DEVICE_A",
            "objects": [
              {
                "name": "DeviceA/VaultAudit",
                "records": [
                  {
                    "key": "DeviceA/VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              }
            ]
          },

          {
            "name": "SERVER",
            "objects": [
              {
                "name": "DeviceA/VaultAudit",
                "records": [
                  {
                    "key": "DeviceA/VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              },
              {
                "name": "VaultAudit",
                "records": [
                  {
                    "key": "VaultAudit/test_vault@1",
                    "value": "JoinRequest { device_a }"
                  }
                ]
              },
              {
                "name": "Vault",
                "records": [
                  {
                    "key": "Vault/test_vault@1",
                    "value": "Unit { device_a }"
                  },
                  {
                    "key": "Vault/test_vault@2",
                    "value": "Genesis { server_key }"
                  },
                  {
                    "key": "Vault/test_vault@3",
                    "value": "Update { test_vault, device_a }"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
